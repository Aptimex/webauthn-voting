<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Verify a Ballot</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="script.js"></script>
  
  <script type="text/javascript">
  $(document).ready(function () {
      //verification being attemped on same device as manipulation; keep up appearances
      var origData = getCookie("origData");
      if (origData != "") {
          $("#verifyMe").html(btoa(origData));
      }
      
      //convert to ascii for convenience
      var ballotData = $("#verifyMe").html();
      $("#decoded").html(atob(ballotData));
  });
  </script>
  
  <style media="screen">
      #verifyMe, #decoded {
          background-color: lightgrey;
          max-width: 500px;
      }
  </style>
  
  <!-- link rel="stylesheet" href="modal.css" -->
</head>

<body>

  Username: <input disabled="1" type="text" name="username" id="username" value="{{.Username}}">
  <!--b id="username">{{.Username}}</b -->
  <br>
  <br>
  
  <p>Ballot data:</p>
  <div id="verifyMe">{{.BallotData}}</div>
  
  <p>Decoded data:</p>
  <div id="decoded"></div>
  <br>
  <button onclick="verifyBallot()">Verify Ballot</button>
  <button onclick="voidBallot()">VOID Ballot</button>
  
  <p>Feedback</p>
  <div>
      <pre id="verified"></pre>
  </div>
  
  <button onclick="dumpPending()">Dump Pending Ballots</button>
  <button onclick="dumpCast()">Dump Cast Ballots</button>
  
  <p>Pending ballots dump:</p>
  <div>
      <pre id="pbDump"></pre>
  </div>
  
  <p>Cast ballots dump:</p>
  <div>
      <pre id="cbDump"></pre>
  </div>
</body>

</html>
